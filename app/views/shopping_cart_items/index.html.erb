<script type="text/javascript">
    function onVisaCheckoutReady(){
        V.init( {
            apikey: "2EYRS5MR8YGXZXCKSOWF21kAYVQ0_OiZXaswp2fWeZPhNu2m8",
            paymentRequest:{
                currencyCode: "USD",
                subtotal: "11.00"
            }
        });
        V.on("payment.success", function(payment)
        {alert(JSON.stringify(payment)); });
        V.on("payment.cancel", function(payment)
        {alert(JSON.stringify(payment)); });
        V.on("payment.error", function(payment, error)
        {alert(JSON.stringify(error)); });
    }
</script>

<p id="notice"><%= notice %></p>

<!--<h1>Shopping Cart Items</h1>-->
<div class="visaBTN">
  <h1>
    Shopping Cart Items

    <img alt="Visa Checkout" class="v-button" role="button"
         src="https://sandbox.secure.checkout.visa.com/wallet-services-web/xo/button.png"/>
  </h1>
</div>


<table table class="table table-striped">
  <thead>
    <tr>
      <th>Product</th>
      <!--<th>Allergens</th>-->
      <th>Price</th>
      <th colspan="3"></th>
    </tr>
  </thead>

  <tbody>
    <% @shopping_cart_items.each do |item| %>
      <tr>
        <!-- Product : item:string price:decimal allergens:string quantity:integer image:string-->
        <!--SHopogncart - product_id:integer user_id:integer prod_qty:integer-->
        <td>
          <img class="card-img-top">
          <%= image_tag item.product.image %>
          <%= item.product.item %>
        </td>
        <!--<td><%= item.product.allergens %></td>-->
        <td class="price">$ <%= '%.2f' %  item.product.price %></td>
        <!--<td><%= item.user.allergies %></td>-->
      </tr>
    <% end %>
  </tbody>
</table>



<br>
<script>
    function refresh() {
        window.location.reload(true);
    }
    setTimeout(refresh, 1000 * 1000);
</script>

<script type="text/javascript"
        src="https://sandbox-assets.secure.checkout.visa.com/
checkout-widget/resources/js/integration/v1/sdk.js">
</script>
